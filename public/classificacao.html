<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ClassificaÃ§Ã£o de Ligas</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #0f172a; color: white; }
        .glass { background: rgba(30, 41, 59, 0.7); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); }
        .tab-active { border-bottom: 2px solid #3b82f6; color: #3b82f6; }
        tr:nth-child(even) { background: rgba(255,255,255,0.02); }
        tr:hover { background: rgba(59, 130, 246, 0.1); transition: 0.2s; }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="max-w-6xl mx-auto">
        <header class="mb-8 text-center">
            <h1 class="text-3xl font-bold mb-2">Tabelas de ClassificaÃ§Ã£o</h1>
            <p class="text-slate-400">Dados atualizados em tempo real via API ESPN</p>
        </header>

        <nav id="tabs" class="flex flex-wrap justify-center gap-2 mb-6 border-b border-slate-700 pb-4">
            <button onclick="carregarLiga('BR')" class="px-4 py-2 rounded-lg hover:bg-slate-800 transition tab-btn" data-liga="BR">ğŸ‡§ğŸ‡· Brasil</button>
            <button onclick="carregarLiga('PL')" class="px-4 py-2 rounded-lg hover:bg-slate-800 transition tab-btn" data-liga="PL">ğŸ´ó §ó ¢ó ¥ó ®ó §ó ¿ Premier League</button>
            <button onclick="carregarLiga('ES')" class="px-4 py-2 rounded-lg hover:bg-slate-800 transition tab-btn" data-liga="ES">ğŸ‡ªğŸ‡¸ La Liga</button>
            <button onclick="carregarLiga('IT')" class="px-4 py-2 rounded-lg hover:bg-slate-800 transition tab-btn" data-liga="IT">ğŸ‡®ğŸ‡¹ Serie A</button>
            <button onclick="carregarLiga('DE')" class="px-4 py-2 rounded-lg hover:bg-slate-800 transition tab-btn" data-liga="DE">ğŸ‡©ğŸ‡ª Bundesliga</button>
            <button onclick="carregarLiga('FR')" class="px-4 py-2 rounded-lg hover:bg-slate-800 transition tab-btn" data-liga="FR">ğŸ‡«ğŸ‡· Ligue 1</button>
            <button onclick="carregarLiga('SA')" class="px-4 py-2 rounded-lg hover:bg-slate-800 transition tab-btn" data-liga="SA">ğŸ‡¸ğŸ‡¦ Saudi Pro</button>
        </nav>

        <div class="glass rounded-xl overflow-hidden shadow-2xl">
            <div class="overflow-x-auto">
                <table class="w-full text-left border-collapse">
                    <thead class="bg-slate-800 text-slate-300 text-sm uppercase">
                        <tr>
                            <th class="p-4">Pos</th>
                            <th class="p-4">Clube</th>
                            <th class="p-4 text-center">P</th>
                            <th class="p-4 text-center">J</th>
                            <th class="p-4 text-center">V</th>
                            <th class="p-4 text-center">E</th>
                            <th class="p-4 text-center">D</th>
                            <th class="p-4 text-center hidden md:table-cell">GP</th>
                            <th class="p-4 text-center hidden md:table-cell">GC</th>
                            <th class="p-4 text-center">SG</th>
                        </tr>
                    </thead>
                    <tbody id="tabela-corpo" class="text-sm md:text-base">
                        </tbody>
                </table>
            </div>
            <div id="loading" class="p-10 text-center text-slate-500">Carregando dados...</div>
        </div>
    </div>

    <script>
        // CONFIGURAÃ‡Ã•ES DO SUPABASE
        const SUPABASE_URL = "https://sihunefyfkecumbiyxva.supabase.co"; 
        const SUPABASE_KEY = "SUA_ANON_PUBLIC_KEY_AQUI"; // Pegue no painel Settings > API
        const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        async function carregarLiga(ligaId) {
            const corpo = document.getElementById('tabela-corpo');
            const loader = document.getElementById('loading');
            
            // Atualizar visual das abas
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.toggle('tab-active', btn.getAttribute('data-liga') === ligaId);
            });

            corpo.innerHTML = "";
            loader.style.display = "block";

            try {
                const { data, error } = await supabase
                    .from('tabelas_ligas')
                    .select('*')
                    .eq('liga', ligaId)
                    .order('posicao', { ascending: true });

                if (error) throw error;

                loader.style.display = "none";
                
                if (data.length === 0) {
                    corpo.innerHTML = `<tr><td colspan="10" class="p-10 text-center text-slate-500">Nenhum dado encontrado para esta liga.</td></tr>`;
                    return;
                }

                data.forEach(clube => {
                    const row = `
                        <tr class="border-b border-slate-700/50">
                            <td class="p-4 font-bold text-slate-400">${clube.posicao}Âº</td>
                            <td class="p-4 flex items-center gap-3">
                                <img src="${clube.escudo}" class="w-8 h-8 object-contain" onerror="this.src='https://via.placeholder.com/32?text=?'">
                                <span class="font-semibold">${clube.time}</span>
                            </td>
                            <td class="p-4 text-center font-bold text-blue-400">${clube.pontos}</td>
                            <td class="p-4 text-center">${clube.jogos}</td>
                            <td class="p-4 text-center text-green-500">${clube.vitorias}</td>
                            <td class="p-4 text-center text-slate-400">${clube.empates}</td>
                            <td class="p-4 text-center text-red-500">${clube.derrotas}</td>
                            <td class="p-4 text-center hidden md:table-cell text-slate-400">${clube.gols_pro}</td>
                            <td class="p-4 text-center hidden md:table-cell text-slate-400">${clube.gols_contra}</td>
                            <td class="p-4 text-center font-medium ${clube.sg >= 0 ? 'text-green-400' : 'text-red-400'}">${clube.sg}</td>
                        </tr>
                    `;
                    corpo.innerHTML += row;
                });

            } catch (err) {
                console.error("Erro:", err);
                loader.innerText = "Erro ao carregar dados do banco.";
            }
        }

        // Inicia carregando a Premier League por padrÃ£o
        window.onload = () => carregarLiga('PL');
    </script>
</body>
</html>
